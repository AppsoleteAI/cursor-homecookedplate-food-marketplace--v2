# Backend Environment Variables
# Copy this to backend/.env and fill in your actual values

# Supabase Service Role Key (for server-side operations)
# Get from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Stripe Configuration - MARKETPLACE ARCHITECTURE
# You only need ONE Stripe account (your platform account)
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_...
# OR for production: sk_live_...

# How it works:
# 1. You use ONE platform Stripe account (STRIPE_SECRET_KEY)
# 2. Each PlateMaker (seller) creates a "Connected Account" via Stripe Connect
# 3. When a buyer pays, money goes to the seller's Connected Account
# 4. Your platform automatically takes a fee (default 10%)
#
# To onboard sellers:
# - They must complete Stripe onboarding via the app
# - Use the trpc.payments.createConnectAccount API
# - Their account ID is saved in profiles.stripe_account_id
#
# Stripe Webhook Secret (for verifying webhook signatures)
# Get from: https://dashboard.stripe.com/webhooks
# Create a webhook endpoint pointing to: https://your-backend-url/webhook/stripe
# Select event: payment_intent.succeeded
# Then copy the webhook signing secret
STRIPE_WEBHOOK_SECRET=whsec_...

# Auto-detect environment (test vs live)
# The system will automatically detect if you're using test or live keys
# based on the key prefix (sk_test_ vs sk_live_)
